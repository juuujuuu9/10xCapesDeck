---
// Test page for Bunny CDN setup
// Use this to verify your environment variables are configured correctly
import { bunnyImage } from '../lib/bunny-cdn';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>Bunny CDN Test</title>
	</head>
	<body class="p-8 bg-gray-900 text-white">
		<h1 class="text-3xl font-bold mb-8">Bunny CDN Setup Test</h1>
		<div class="bg-blue-900/30 border border-blue-500 rounded p-4 mb-8 space-y-2">
			<p class="text-sm">
				<strong>WordPress Pull Zone:</strong>{' '}
				{import.meta.env.PUBLIC_BUNNY_CDN_URL_WORDPRESS ? (
					<code class="bg-gray-800 px-2 py-1 rounded">{import.meta.env.PUBLIC_BUNNY_CDN_URL_WORDPRESS}</code>
				) : (
					<span class="text-yellow-400">⚠️ Add to .env as PUBLIC_BUNNY_CDN_URL_WORDPRESS</span>
				)}
			</p>
			<p class="text-sm">
				<strong>Storage Pull Zone:</strong>{' '}
				{import.meta.env.PUBLIC_BUNNY_CDN_URL_STORAGE ? (
					<code class="bg-gray-800 px-2 py-1 rounded">{import.meta.env.PUBLIC_BUNNY_CDN_URL_STORAGE}</code>
				) : (
					<span class="text-yellow-400">⚠️ Add to .env as PUBLIC_BUNNY_CDN_URL_STORAGE</span>
				)}
			</p>
			<p class="text-xs text-gray-400 mt-2">
				Add these to your <code class="bg-gray-800 px-1 rounded">.env</code> file (see ENV_SETUP.md)
			</p>
		</div>

		<section class="mb-8">
			<h2 class="text-2xl font-semibold mb-4">Environment Variables</h2>
			<div class="bg-gray-800 p-4 rounded">
				<p class="mb-2">
					<strong>PUBLIC_BUNNY_CDN_URL:</strong>{' '}
					{import.meta.env.PUBLIC_BUNNY_CDN_URL ? (
						<>
							<span class="text-green-400">✅ Set</span>
							<code class="block bg-gray-900 p-2 rounded break-all text-xs mt-1">{import.meta.env.PUBLIC_BUNNY_CDN_URL}</code>
						</>
					) : (
						<span class="text-red-400">❌ Not set</span>
					)}
				</p>
				<p class="text-sm text-gray-400 mt-2">
					<strong>Recommended Pull Zones:</strong>
				</p>
				<ul class="text-sm space-y-1 mt-1">
					<li>
						PUBLIC_BUNNY_CDN_URL_WORDPRESS:{' '}
						{import.meta.env.PUBLIC_BUNNY_CDN_URL_WORDPRESS ? (
							<>
								<span class="text-green-400">✅ Set</span>
								<code class="block bg-gray-900 p-2 rounded break-all text-xs mt-1">{import.meta.env.PUBLIC_BUNNY_CDN_URL_WORDPRESS}</code>
							</>
						) : (
							<span class="text-gray-500">Not set (for WordPress content)</span>
						)}
					</li>
					<li>
						PUBLIC_BUNNY_CDN_URL_STORAGE:{' '}
						{import.meta.env.PUBLIC_BUNNY_CDN_URL_STORAGE ? (
							<>
								<span class="text-green-400">✅ Set</span>
								<code class="block bg-gray-900 p-2 rounded break-all text-xs mt-1">{import.meta.env.PUBLIC_BUNNY_CDN_URL_STORAGE}</code>
							</>
						) : (
							<span class="text-gray-500">Not set (for new site content)</span>
						)}
					</li>
				</ul>
			</div>
		</section>

		<section class="mb-8">
			<h2 class="text-2xl font-semibold mb-4">Image URL Test</h2>
			<div class="bg-yellow-900/30 border border-yellow-500 rounded p-4 mb-4">
				<p class="text-sm text-yellow-200">
					<strong>⚠️ Note:</strong> These are example paths. Replace with actual image paths from your WordPress site or Storage zone.
					To find WordPress image paths, check your WordPress media library or inspect images on your WordPress site.
				</p>
			</div>
			<div class="bg-gray-800 p-4 rounded space-y-4">
				<div>
					<p class="mb-2">
						<strong>Default Pull Zone (Example):</strong> /wp-content/uploads/2024/01/example.jpg
					</p>
					<code class="block bg-gray-900 p-2 rounded break-all text-xs">
						{bunnyImage('/wp-content/uploads/2024/01/example.jpg', { width: 800, quality: 85 })}
					</code>
					<p class="text-xs text-gray-400 mt-1">
						Uses PUBLIC_BUNNY_CDN_URL (fallback)
					</p>
				</div>
				<div>
					<p class="mb-2">
						<strong>WordPress Pull Zone (Example):</strong> /wp-content/uploads/2024/01/example.jpg
					</p>
					<code class="block bg-gray-900 p-2 rounded break-all text-xs">
						{bunnyImage('/wp-content/uploads/2024/01/example.jpg', { width: 800, quality: 85, pullZone: 'wordpress' })}
					</code>
					{import.meta.env.PUBLIC_BUNNY_CDN_URL_WORDPRESS ? (
						<p class="text-green-400 text-sm mt-1">✅ Using PUBLIC_BUNNY_CDN_URL_WORDPRESS</p>
					) : (
						<p class="text-yellow-400 text-sm mt-1">⚠️ Falling back to default (PUBLIC_BUNNY_CDN_URL_WORDPRESS not set)</p>
					)}
					<p class="text-xs text-gray-400 mt-1">
						WordPress images are typically in: <code>/wp-content/uploads/YYYY/MM/filename.jpg</code>
					</p>
				</div>
				<div>
					<p class="mb-2">
						<strong>Storage Pull Zone (Example):</strong> /hero.jpg
					</p>
					<code class="block bg-gray-900 p-2 rounded break-all text-xs">
						{bunnyImage('/hero.jpg', { width: 800, quality: 85, pullZone: 'storage' })}
					</code>
					{import.meta.env.PUBLIC_BUNNY_CDN_URL_STORAGE ? (
						<p class="text-green-400 text-sm mt-1">✅ Using PUBLIC_BUNNY_CDN_URL_STORAGE</p>
					) : (
						<p class="text-yellow-400 text-sm mt-1">⚠️ Falling back to default (PUBLIC_BUNNY_CDN_URL_STORAGE not set)</p>
					)}
					<p class="text-xs text-gray-400 mt-1">
						Storage images use paths relative to your Storage zone root
					</p>
				</div>
			</div>
		</section>


		<section>
			<h2 class="text-2xl font-semibold mb-4">Next Steps</h2>
			<ol class="list-decimal list-inside space-y-2">
				<li>Create a <code class="bg-gray-800 px-2 py-1 rounded">.env</code> file in the project root</li>
				<li>Add your Bunny CDN URLs (see BUNNY_CDN_SETUP.md)</li>
				<li>Restart your dev server: <code class="bg-gray-800 px-2 py-1 rounded">npm run dev</code></li>
				<li>Refresh this page to verify the URLs are generated correctly</li>
			</ol>
		</section>
	</body>
</html>

