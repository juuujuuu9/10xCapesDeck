---
import { LazyVideo } from '../../LazyVideo.tsx';

export interface Props {
	videos: Array<{
		src?: string;
		videoId?: string;
		poster?: string;
		pullZone?: string;
		priority?: boolean;
	}>;
	title?: string;
	id?: string;
}

const { videos, title, id } = Astro.props;

// Take first 4 videos for the stack
const stackedVideos = videos.slice(0, 4);
---

<section id={id} class="w-full h-dvh snap-start snap-always flex flex-col overflow-hidden p-2 md:p-4 lg:p-8 bg-white">
	<div class="section-content w-full h-full flex flex-col">
	{title && (
		<div class="w-full text-center mb-2 md:mb-4 shrink-0">
			<h2 class="text-[#ca2c1e] text-[2rem] md:text-[48px] lowercase font-bold leading-none tracking-wide">
				{title}
			</h2>
		</div>
	)}
	<div class="flex-1 grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 lg:gap-8 overflow-hidden auto-rows-fr">
		{stackedVideos.map((video, index) => (
			<div class="aspect-video overflow-hidden w-full h-full">
				<LazyVideo
					client:load
					src={video.src}
					videoId={video.videoId}
					poster={video.poster}
					pullZone={video.pullZone}
					priority={video.priority !== undefined ? video.priority : true}
					className="w-full h-full object-cover"
					autoPlay
					loop
					muted
					playsInline
				/>
			</div>
		))}
	</div>
	</div>
</section>
