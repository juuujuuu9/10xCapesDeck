---
import { LazyImage } from '../../LazyImage.tsx';

export interface ImageItem {
	src: string;
	alt: string;
	label?: string;
	pullZone?: string;
	priority?: boolean;
	width?: number;
	quality?: number;
}

export interface Props {
	title: string;
	block1: ImageItem[]; // 3 images
	block2: ImageItem[]; // 2 images
}

const { title, block1, block2 } = Astro.props;
---

<section class="w-full h-dvh max-h-dvh pl-2 md:pl-4 lg:pl-8 pr-2 md:pr-16! lg:pr-16! py-2 md:py-4 lg:py-8 snap-start snap-always flex flex-col overflow-hidden box-border">
	{/* Content Grid */}
	<div class="flex-1 min-h-0 grid grid-cols-1 lg:grid-cols-[40%_60%] gap-2 md:gap-4 lg:gap-8">
		{/* Block 1: 3 images - first full width, then 2 in 50/50 */}
		<div class="flex-1 min-h-0 flex flex-col gap-2 md:gap-4 lg:gap-8">
			{/* Title (left block only) */}
			<div class="w-full flex-shrink-0 flex items-start justify-start">
				<span class="blk-title">
					{title}
				</span>
			</div>

			{/* First image: 100% width */}
			<div class="flex sm:hidden lg:flex relative overflow-hidden flex-1 min-h-0 items-center justify-center">
				<LazyImage
					client:visible
					src={block1[0].src}
					alt={block1[0].alt}
					pullZone={block1[0].pullZone}
					priority={block1[0].priority || false}
					width={block1[0].width || 1200}
					quality={block1[0].quality || 85}
					className="w-full h-full object-cover object-center"
				/>
				{block1[0].label && (
					<div class="absolute bottom-0 left-0 px-3 md:px-4 lg:px-6 py-1.5 md:py-2 lg:py-3">
						<span class="text-white text-lg md:text-xl lg:text-2xl font-light lowercase tracking-wide">
							{block1[0].label}
						</span>
					</div>
				)}
			</div>
		{/* Second and third images: 50/50 */}
		<div class="grid grid-cols-2 gap-2 md:gap-4 lg:gap-8 flex-1 min-h-0">
			{block1.slice(1).map((image, index) => (
				<div class="relative overflow-hidden flex-1 min-h-0 flex items-center justify-center">
					<LazyImage
						client:visible
						src={image.src}
						alt={image.alt}
						pullZone={image.pullZone}
						priority={image.priority || false}
						width={image.width || 1200}
						quality={image.quality || 85}
						className={`w-full h-full object-cover ${index === 1 ? 'object-[70%_center]' : 'object-center'}`}
					/>
					{image.label && (
						<div class="absolute bottom-0 left-0 px-3 md:px-4 lg:px-6 py-1.5 md:py-2 lg:py-3">
							<span class="text-white text-lg md:text-xl lg:text-2xl font-light lowercase tracking-wide">
								{image.label}
							</span>
						</div>
					)}
				</div>
			))}
		</div>
		</div>

		{/* Block 2: 2 images */}
		<div class="flex-1 min-h-0 grid grid-cols-2 gap-2 md:gap-4 lg:gap-8">
			{block2.map((image) => (
				<div class="relative overflow-hidden flex-1 min-h-0 flex items-center justify-center">
					<LazyImage
						client:visible
						src={image.src}
						alt={image.alt}
						pullZone={image.pullZone}
						priority={image.priority || false}
						width={image.width || 1200}
						quality={image.quality || 85}
						className="w-full h-full object-cover object-center"
					/>
					{image.label && (
						<div class="absolute bottom-0 left-0 px-3 md:px-4 lg:px-6 py-1.5 md:py-2 lg:py-3">
							<span class="text-white text-lg md:text-xl lg:text-2xl font-light lowercase tracking-wide">
								{image.label}
							</span>
						</div>
					)}
				</div>
			))}
		</div>
	</div>
</section>
