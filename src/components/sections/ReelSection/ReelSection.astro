---
import { LazyVideo } from '../../LazyVideo.tsx';
import { bunnyImage } from '../../../lib/bunny-cdn';

export interface Props {
	video: {
		src: string;
		poster?: string;
		pullZone?: string;
		priority?: boolean;
	};
	className?: string;
}

const { video, className = '' } = Astro.props;

// Generate poster URL if provided
const posterUrl = video.poster 
	? bunnyImage(video.poster, {
		pullZone: video.pullZone || 'storage',
		width: 1920,
		quality: 85
	})
	: undefined;
---

<section class={`bg-black w-full max-w-screen mx-auto h-dvh flex flex-col items-center justify-center snap-start snap-always px-0 ${className}`}>
	<LazyVideo
		client:load
		src={video.src}
		poster={posterUrl}
		pullZone={video.pullZone || 'storage'}
		autoPlay
		muted={true}
		loop
		playsInline
		showUnmuteButton={true}
		priority={video.priority || false}
		className="w-full h-full object-cover"
	/>
</section>
